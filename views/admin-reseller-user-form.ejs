<%- include('partials/header', { pageTitle, activePage }) %>

    <section style="padding: 2rem 1.5rem; max-width: 560px; margin: 0 auto;">
        <header class="page-header">
            <div>
                <h1 class="page-title">
                    <%= isEdit ? 'Edit Reseller User' : 'New Reseller User' %>
                </h1>
                <p class="page-subtitle">
                    Reseller users have full admin access to this portal (all sites and accounts).
                </p>
            </div>
        </header>

        <% if (error) { %>
            <div style="background:#ffe5e5; color:#b00; padding:0.75rem 1rem; border-radius:8px; margin-bottom:1rem;">
                <%= error %>
            </div>
            <% } %>

                <form method="post"
                    action="<% if (isEdit) { %>/admin/reseller-users/<%= userRecord.id %>/edit<% } else { %>/admin/reseller-users/new<% } %>">

                    <div class="form-group">
                        <label for="email">Email*</label>
                        <input id="email" type="email" name="email" value="<%= userRecord.email || '' %>" <% if (isEdit)
                            { %> readonly <% } %>
                            required
                            >
                    </div>

                    <div class="form-group">
                        <label for="name">Name</label>
                        <input id="name" name="name" value="<%= userRecord.name || '' %>">
                    </div>

                    <div class="form-group">
                        <label for="password">
                            <%= isEdit ? 'New Password (leave blank to keep current)'
                                : 'Password (optional ‚Äì leave blank to send an invite email)' %>
                        </label>
                        <div class="password-wrapper">
                            <input id="password" name="password" type="password" class="form-control password-input"
                                autocomplete="new-password">
                            <button type="button" class="password-toggle" aria-label="Show password">üëÅ</button>
                        </div>
                    </div>

                    <p style="font-size:0.9rem; color:#555; margin-top:0.5rem;">
                        This user will be created with role <code>admin</code> and will have full reseller-level access.
                    </p>

                    <div class="form-actions" style="margin-top:1.5rem;">
                        <button type="submit" class="btn btn-primary">
                            <%= isEdit ? 'Save Changes' : 'Create Reseller User' %>
                        </button>
                        <a href="/admin/reseller-users" class="btn btn-outline" style="margin-left:0.75rem;">
                            Cancel
                        </a>
                    </div>
                </form>
    </section>

    <%- include('partials/footer') %>